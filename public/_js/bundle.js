(()=>{"use strict";class e{constructor(){this.root=document.querySelector("#root")}}class t extends(function(e){return class extends e{setRepository(e){return this.repository=e,this}}}(function(e){return class extends e{constructor(){super(...arguments),this.router={}}setRouter(e){return this.router=e,this.router.init(),this}}}(function(e){return class extends e{setPages(...e){return this.pages=e.map((e=>new e(this))),this}}}(e)))){}class s{constructor(e){this.element=document.createElement(e)}}class i extends(function(e){return class extends e{text(e){return this.element.innerText=e,this}}}(function(e){return class extends e{click(e){return this.element.onclick=e,this}}}(function(e){return class extends e{class(...e){return this.element.classList.add(...e),this}}}(function(e){return class extends e{atribs(e){for(const t in e)this.element.setAttribute(t,e[t]);return this}atrib(e,t){return this.element.setAttribute(e,t),this}}}(function(e){return class extends e{children(...e){return e.forEach((e=>{"string"==typeof e?this.element.innerHTML+=e:this.element.appendChild(e.element)})),this}}}(function(e){return class extends e{object(e){return e(this),this}}}(function(e){return class extends e{on(e,t){return Object.prototype.hasOwnProperty.call(this.element,`on${e}`)?this.element[`on${e}`]=t:console.error(`Event: on${e} doesn't exist in ${this.element}`),this}}}(function(e){return class extends e{HTML(e){return this.element.innerHTML=e,this}}}(s))))))))){constructor(e){super(e)}}function n(e){return new i(e)}class l{constructor(e,t,s){this.key="",this.key=t,this.parent=e,this.newComponent=s}get(e,t,s){return"object"==typeof e[t]&&null!==e[t]?new Proxy(e[t],new l(s,t,this.newComponent)):e[t]}set(e,t,s,i){return e[t]=s,null===this.parent?this.newComponent.create(i):this.parent[this.key]=e,!0}}class r{constructor(e){this.app=e}watch(e){const t=new Proxy(this,{set:(e,t,s)=>{var i;return"main"===t&&(null===(i=e.main.element.parentElement)||void 0===i||i.replaceChild(s.element,e.main.element)),e[t]=s,!0}});return[new Proxy(e,new l(null,"",t)),t]}}class a extends r{}class o extends r{constructor(e,t){super(e),this.main=n("div"),this.adapter=t,this.fields={title:"",description:""}}async create(e){return this.main=n("div").children(n("h3").text(e.title),n("p").text(e.description))}}class c extends r{constructor(e,t){super(e),this.main=n("div"),this.card=t}async create(e){return this.main=n("div").children(n("h2").text(e.title),...await Promise.all(e.list.map((async t=>{const[s,i]=new this.card(this.app,e.adapter).watch(t);return await i.create(s)}))))}}class h{constructor(e,t="",s="",i={back:"Voltar",next:"none"}){this.data={},this.fields={},this.model=e,this.title=t,this.controller=s,this.footer=i}}class d{constructor(e){this.app=e}}class u{}u.list={createitem:class extends d{execute(e){console.log(e),e.lista.list.push(e.model)}}};class p{constructor(){this.main=n("form"),this.properties={},this.fields={}}async create(e){return this.properties={},this.fields=await e.getFields(),console.log(this.fields),this.main=n("form").class("d-grid","gap-m","ac-between").children(n("div").class("d-grid","gap-m","o-auto").children(n("h2").object((t=>t.element.innerText=e.title)),...Object.keys(this.fields).map((t=>{console.log(this.fields[t]);const s=this.fields[t].create(t);return this.fields[t].setValue(e.model[t]),this.fields[t].element.element.id=t,s}))),n("div").class("footer").children(...(()=>{const t=[];return"none"!==e.footer.back&&t.push(n("button").text(e.footer.back).click((()=>{console.log("aqui tem que voltar no modal"),x.back()})).class("aux").atrib("type","button")),"none"!==e.footer.next&&t.push(n("button").text(e.footer.next)),t})())).object((t=>t.element.onsubmit=t=>{t.preventDefault(),console.log(this.properties),console.log(this.fields);for(const t in this.fields)Object.prototype.hasOwnProperty.call(e.model,t)?e.model[t]=this.fields[t].getValue():e.data[t]=this.fields[t].getValue();e.fields=this.fields,console.log(e),console.log(u.list),console.log(u.list[e.controller]),new u.list[e.controller]({}).execute(e)}))}}class m extends r{constructor(){super(...arguments),this.main=n("div")}async create(e){return this.main=n("div").class("modal-container").children(n("div").class("modal","d-grid").children(await(new p).create(e))).object((e=>e.element.onclick=t=>{var s;t.target===e.element&&(null===(s=this.app.router)||void 0===s||s.hash.remove())}))}}class x{static async show(e,t){this.modal=new m(e),e.router.hash.push("modal"),this.node={form:t},this.element=await this.modal.create(t),e.root.appendChild(this.element.element),e.router.hash.cb=()=>{this.modal.main.element.remove()}}static async change(e,t){var s;const i=await this.modal.create(e);null===(s=this.element.element.parentElement)||void 0===s||s.replaceChild(i.element,this.element.element),this.element=i,this.node=t}static async push(e){await this.change(e,{form:e,pre:this.node})}static async back(){this.node.pre&&await this.change(this.node.pre.form,this.node.pre)}}function b(e){return class extends e{action(e){x.push(e)}}}function g(e){return class extends e{getValue(){return this.element.element.value}}}function f(e){return class extends e{setValue(e){void 0!==e&&(this.element.element.value=e)}}}class w{constructor(e,t,s){this.label="",this.placeholder="",this.type=e,this.label=t,this.placeholder=s,this.element=n("input")}}class v extends(b(f(g(w)))){constructor(e,t){super("text",e,"")}create(){return this.element=n("button").click((()=>{this.action([])})).atrib("type",this.type).text(this.label)}}class y extends(b(f(g(w)))){constructor(e,t,s){super("text",e,""),this.list=[],this.list=t,s&&(this.action=s)}create(){return this.element=n("div").children(...this.list.map((e=>n("div").text(e.name||e.modelo).click((t=>this.action(e)))))).class("object-list","d-grid","gap-m","max-h-80","of-auto")}}class k extends(f(g(w))){constructor(e,t){super("password",e,t),this.extra=[]}create(){return this.element.atrib("type",this.type).atrib("placeholder",this.placeholder),n("div").class("d-grid","gap-p").children(n("label").object((e=>e.element.innerText=this.label)),this.element,...this.extra.map((e=>(new P.list[e]).create())))}}class j extends(f(g(w))){constructor(e,t){super("text",e,t)}create(e){return this.element=n("input").atribs({id:e,type:this.type}).atrib("placeholder",this.placeholder),n("div").class("d-grid","gap-p").children(n("label").text(this.label).atribs({for:e}),this.element)}}class T extends(b(f(g(w)))){constructor(e,t,s){super("objecth",e,""),this.list=[],this.list=t,s&&(this.action=s)}create(){return this.element=n("div").children(n("label").text(this.label),n("div").children(...this.list.map((e=>"string"==typeof e?n("p").text(e):n("div").class(e.main?"mainadapter":"normaladapter").text(e.name||e.modelo).click((t=>this.action(e)))))).class("object-list","d-flex","gap-m","max-h-80","of-auto")).class("d-grid","gap-p")}}class V extends(f(g(w))){constructor(e,t,s){super("text",e,t),this.main=n("div"),this.list=[]}create(e){return console.log(this),this.element=n("input").atribs({id:e,type:this.type}).atrib("placeholder",this.placeholder).click((()=>{const e=this.getValue(),t=this.list[0];if(e?this.main.element.classList.add("checked"):this.main.element.classList.remove("checked"),"all"===this.placeholder)for(const e in t)"all"!==e&&(t[e].element.element.checked=this.getValue(),this.getValue()?t[e].main.element.classList.add("checked"):t[e].main.element.classList.remove("checked"));else{const e=[];for(const s in t)"all"!==s&&e.push(t[s].element.element.checked);e.find((e=>!e))||(t.all.element.element.checked=!1,t.all.main.element.classList.remove("checked"))}})),this.list[0][this.placeholder]=this,this.main=n("label").class("d-flex","gap-p","cb-container").children(n("label").class("checkbox").children(this.element,n("span").class("checkmark")),n("label").text(this.label).atribs({for:e}))}getValue(){return this.element.element.checked}}class L extends(f(g(w))){constructor(e,t,s){super("objecth",e,s||"Selecione"),this.list=[],this.list=t}create(){return this.element=n("select").children(n("option").atribs({value:"none",selected:"",disabled:""}).text(this.placeholder),...this.list.map((e=>n("option").atrib("value",e.value).text(e.name)))),n("div").children(n("label").text(this.label),this.element).class("d-grid","gap-p")}}class C extends(g(w)){constructor(e){super("text",e,"")}create(e){return this.element=n("p").class("show"),n("div").class("d-grid","gap-p").children(n("label").text(this.label).atribs({for:e}),this.element)}setValue(e){this.element.element.innerText=e}}class P{}P.list={text:j,show:C,date:j,"datetime-local":class extends w{constructor(e,t){super("text",e,t)}create(){return this.element=n("input").atrib("type",this.type).atrib("placeholder",this.placeholder),n("div").class("d-grid","gap-p").children(n("label").object((e=>e.element.innerText=this.label)),this.element)}getValue(){const e=this.element.element;return new Date(e.value)}setValue(e){const t=this.element.element,s="string"==typeof e?e:e.toISOString(),i=new Date(s);t.value=`${i.toLocaleDateString().split("/").reverse().join("-")} ${i.toLocaleTimeString().replace(/[A-Z ]/g,"")}`}},password:k,esqueci:class extends w{constructor(e,t){super("esqueci",e,t)}create(){return n("p").class("pointer").object((e=>{e.element.innerText="Esqueci minha senha",e.element.style.textAlign="right",e.element.onclick=e=>{console.log("aqui tem que mudar o state do form")}}))}},objectv:y,objecth:T,select:L,button:v,option:class extends w{constructor(e,t){super("option",e,t),this.options=[],this.elements=[]}create(){return this.element=n("div"),n("div").class("d-grid","gap-p").children(n("label").object((e=>e.element.innerText=this.label)),this.element)}getValue(){return this.options.map(((e,t)=>{const s=this.elements[t].element;return e.value=s.value,e}))}setValue(e){this.options=e,this.options&&this.element.children(...this.options.map(((e,t)=>{const s=n("input").atrib("value",e.value);return this.elements.push(s),n("div").children(n("label").text(e.key),s).class("d-grid","gap-s")}))).class("d-grid","gap-m","pl-1")}},checkbox:V};class q{static field(e,...t){return new P.list[e](...t)}}class E extends h{constructor(e,t){super(e,"Criar Página","createitem",{back:"none",next:"Criar"}),this.model=e,this.lista=t}async getFields(){return{title:q.field("text","Título","Estou super empolgado"),description:q.field("text","Descricão","Para aprender muito mais sobre o encrivel framework da Zeyo")}}}class S{static async push(e){window.location.hash=e}}class D extends S{static remove(){this.on&&window.history.back(),this.cb()}}D.on=!1;class O{constructor(e){this.app=e}async build(e){var t;this.app.root.innerHTML="";const s={};console.log(this.app);const i=null===(t=this.app.pages)||void 0===t?void 0:t.find((t=>{if(t.route===e)return!0;{const i=t.route.split("/"),n=e.split("/");if(i.length!==n.length)return!1;for(const e in i){if(i[e]!==n[e]&&":"!==i[e][0])return!1;":"===i[e][0]&&(s[i[e].substring(1)]=n[e])}return!0}}));i?this.app.root.appendChild((await i.create()).element):this.app.root.appendChild((await(async()=>n("h1").object((e=>{e.element.innerText="Pagina nao encontrada"})))()).element)}}class $ extends O{push(e){window.history.pushState({state:""},"",e),this.build(e)}}const A=new class extends t{};A.setRepository({}).setPages(class extends a{constructor(){super(...arguments),this.route="/",this.main=n("div")}async create(e){const[t,s]=new c(this.app,o).watch({adapter:"item",title:"Itens",list:[]});return t.list.push({title:"Teste0",description:"Testando lista"}),t.list.push({title:"Teste1",description:"Testando lista"}),t.list.push({title:"Teste2",description:"Testando lista"}),this.main=n("main").children(n("h1").text("Inicio de tudo"),n("button").text("Add").click((()=>x.show(this.app,new E({title:"",description:""},t)))),await s.create(t))}}).setRouter(new class extends ${constructor(){super(...arguments),this.hash=D}init(){this.build(window.location.pathname),window.onpopstate=e=>{e.preventDefault(),this.hash.on?this.hash.on=!1:window.location.hash.length<=1&&this.build(window.location.pathname)},window.onhashchange=e=>{e.newURL.split("#").length>1?this.hash.on=!0:this.hash.remove()}}}(A))})();